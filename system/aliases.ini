[script]
n0=- Aliases
n1=
n2=alias id_login return $system_read(Config,Bot,Login)
n3=alias id_pass return $system_read(Config,Bot,Pass)
n4=alias id_server return $system_read(Config,Bot,Server)
n5=alias id_chan return $system_read(Config,Bot,Chan)
n6=alias id_ajoin return $system_read(Config,Bot,Ajoin)
n7=alias id_chrdir return $system_read(Config,Bot,Chrdir)
n8=alias botversion return $system_read(Config,Bot,Version)
n9=alias msg_prop return 15·15 [1©14Kon1Corp15]1 Kaio Bot14 version02 $botversion 15·15
n10=alias invkey return $system_read(Config,Bot,Invkey)
n11=alias reserve return $system_read(Config,Bot,Reserve)
n12=alias cad_racas return $system_read(Config,Bot,Racas)
n13=alias isnick return $iif($remove($1,_,\,-,`,|,^,[,],$chr(125),$chr(123)) isalnum,$true,$false)
n14=alias capitalize {
n15=  var %x = 0, %y
n16=  while (%x < $numtok($1,32)) { inc %x | var %y = %y $upper($left($gettok($1,%x,32),1)) $+ $right($gettok($1,%x,32),-1) }
n17=  return %y
n18=}
n19=alias porcent { return $calc(($1 * $2)/100) }
n20=alias db {
n21=  if ($prop = reg) { return $exists($+($id_chrdir,/,$1,.ini)) }
n22=  if ($prop = read) { return $readini($+($id_chrdir,/,$1,.ini),$2,$3) }
n23=  if ($prop = write) { return writeini $+($id_chrdir,/,$1,.ini) $2 $3 $4 }
n24=}
n25=alias dbt {
n26=  if ($prop = read) { return $readini(system/temp.ini,$1,$2) }
n27=  if ($prop = write) { return writeini system/temp.ini $1 $2 $3 }
n28=}
n29=alias system_read { return $readini($+(system/,$1,.ini),$2,$3) }
n30=alias system_write { return writeini $+(system/,$1,.ini) $2 $3 $4 }
n31=alias pers { return $dbt($nick,pers).read }
n32=alias pers> { return $replace($1,_,$chr(32)) }
n33=alias pers< { return $replace($1,$chr(32),_)) }
n34=alias state { return $dbt($nick,state).read }
n35=alias numconvert {
n36=  var %i = $len($1),%z = 0,%f | :P
n37=  var %m = $mid($1,%i,1) | var %f = %m $+ %f | dec %i
n38=  if (%i == 0) { return %f } | inc %z
n39=  if (%z == 3) { var %f = . $+ %f | var %z = 0 } | goto p
n40=}
n41=
n42=;Rates
n43=alias Rate_XP return $system_read(Config,Rates,XP)
n44=alias Rate_Zen return $system_read(Config,Rates,Zen)
n45=alias Rate_PartyXP return $system_read(Config,Rates,PartyXP)
n46=alias Rate_PartyZen return $system_read(Config,Rates,PartyZen)
n47=alias Rate_DropItem return $system_read(Config,Rates,DropItem)
n48=alias Rate_DropEquip return $system_read(Config,Rates,DropEquip)
n49=alias Rate_DropEquipWeapon return $system_read(Config,Rates,DropEquipWeapon)
n50=alias Rate_DropAcess return $system_read(Config,Rates,DropAcess)
n51=;
n52=alias level_min_difference return $system_read(Config,Game,Level_min_difference)
n53=;
n54=alias show_atributos {
n55=  var %f = $db($pers,Atributos,For).read
n56=  var %d = $db($pers,Atributos,Des).read
n57=  var %c = $db($pers,Atributos,Cons).read
n58=  var %i = $db($pers,Atributos,Int).read
n59=  var %r = $db($pers,Atributos,Res).read
n60=
n61=  var %pd = $system_read(Racas,$db($pers,Dados,Raca).read,Pontos)
n62=
n63=  var %p = $calc(%pd - %f - %d - %c - %i - %r)
n64=  var %[ = $+(15,$chr(91),14), %] = $+(15,$chr(93),14)
n65=
n66=  msg =$nick 15·02 Força14          %f %[ $+ $str(>,%f) $+ $str(-,$calc(8- %f)) $+ %]
n67=  msg =$nick 15·02 Destreza14       %d %[ $+ $str(>,%d) $+ $str(-,$calc(8- %d)) $+ %]
n68=  msg =$nick 15·02 Constituição14   %c %[ $+ $str(>,%c) $+ $str(-,$calc(8- %c)) $+ %]
n69=  msg =$nick 15·02 Inteligência14   %i %[ $+ $str(>,%i) $+ $str(-,$calc(8- %i)) $+ %]
n70=  msg =$nick 15·02 Resistência14    %r %[ $+ $str(>,%r) $+ $str(-,$calc(8- %r)) $+ %]
n71=
n72=  msg =$nick 15·14 $chr(160)
n73=  msg =$nick 15·14 Pontos restantes15:02 %p
n74=  msg =$nick 15(14Digite 1OK14 quando estiver terminado15.)
n75=  msg =$nick 15·14 $chr(160)
n76=  msg =$nick 15·14 Modificações15:
n77=}
n78=alias cad_complete {
n79=  ;calculando bonus
n80=  var %f_b = $round($calc($db($1,Atributos,For).read * $system_read(Racas,$db($1,Dados,Raca).read,FORb)),0)
n81=  var %d_b = $round($calc($db($1,Atributos,Des).read * $system_read(Racas,$db($1,Dados,Raca).read,DESb)),0)
n82=  var %c_b = $round($calc($db($1,Atributos,Cons).read * $system_read(Racas,$db($1,Dados,Raca).read,CONSb)),0)
n83=  var %i_b = $round($calc($db($1,Atributos,Int).read * $system_read(Racas,$db($1,Dados,Raca).read,INTb)),0)
n84=  var %r_b = $round($calc($db($1,Atributos,Res).read * $system_read(Racas,$db($1,Dados,Raca).read,RESb)),0)
n85=
n86=  $db($1,Atributos,For,%f_b).write | $db($1,Atributos,XFor,%f_b).write
n87=  $db($1,Atributos,Des,%d_b).write | $db($1,Atributos,XDes,%d_b).write
n88=  $db($1,Atributos,Cons,%c_b).write | $db($1,Atributos,XCons,%c_b).write
n89=  $db($1,Atributos,Int,%i_b).write | $db($1,Atributos,XInt,%i_b).write
n90=  $db($1,Atributos,Res,%r_b).write | $db($1,Atributos,XRes,%r_b).write
n91=
n92=  ;Calcular Hp, Ki e Cp
n93=  var %Hp = $round($calc($db($1,Atributos,XCons).read * $system_read(Racas,$db($1,Dados,Raca).read,HPx)),0)
n94=  $db($1,Battle,Hp,%Hp).write | $db($1,Battle,HpMax,%Hp).write
n95=
n96=  var %Ki = $round($calc($db($1,Atributos,XInt).read * $system_read(Racas,$db($1,Dados,Raca).read,Ki)),0)
n97=  $db($1,Battle,Ki,%Ki).write | $db($1,Battle,KiMax,%Ki).write
n98=
n99=  var %Cp = $round($calc($db($1,Atributos,XRes).read + $db($1,Atributos,XDes).read * $system_read(Racas,$db($1,Dados,Raca).read,Cp)),0)
n100=  $db($1,Battle,Cp,%Cp).write | $db($1,Battle,CpMax,%Cp).write
n101=
n102=  ;;Calcular P. Atk. e M. Atk.
n103=  ;var %P.Atk = $calc($db($1,Atributos,XFor).read * $db($1,Atributos,Level).read)
n104=  ;var %M.Atk = $calc($db($1,Atributos,XInt).read * $db($1,Atributos,Level).read)
n105=  ;$db($1,Atributos,P.Atk,%P.Atk).write | $db($1,Atributos,M.Atk,%M.Atk).write
n106=
n107=  ;Calcular P. Def. e M. Def.
n108=  ;var %P.Def = $calc($db($1,Atributos,XRes).read * $db($1,Atributos,XDes).read)
n109=  ;var %M.Def = $calc($db($1,Atributos,XRes).read * $db($1,Atributos,XInt).read)
n110=  ;$db($1,Atributos,P.Def,%P.Def).write | $db($1,Atributos,M.Def,%M.Def).write
n111=
n112=  ;Calcular Accuracy, Speed e Crit. Rate
n113=  ;var %Accuracy = $calc($db($1,Atributos,XDes).read + $db($1,Atributos,XInt).read)
n114=  ;var %Speed = $calc($db($1,Atributos,XDes).read * $db($1,Atributos,XCons).read)
n115=  ;var %Crit.Rate = $calc($db($1,Atributos,XFor).read * $db($1,Atributos,XInt).read)
n116=  ;$db($1,Atributos,Accuracy,%Accuracy).write | $db($1,Atributos,Speed,%Speed).write | $db($1,Atributos,Crit.Rate,%Crit.Rate).write
n117=
n118=
n119=  ;equipamentos iniciais
n120=  $db($1,Equips,List,$system_read(Config,NewCadEquips,List)).write
n121=  if ($system_read(Config,NewCadEquips,Cabeca) != Vazio) { armor add $1 $system_read(Config,NewCadEquips,Cabeca) }
n122=  if ($system_read(Config,NewCadEquips,Corpo) != Vazio) { armor add $1 $system_read(Config,NewCadEquips,Corpo) }
n123=  if ($system_read(Config,NewCadEquips,Braco_Direito) != Vazio) { armor add $1 $system_read(Config,NewCadEquips,Braco_Direito) }
n124=  if ($system_read(Config,NewCadEquips,Braco_Esquerdo) != Vazio) { armor add $1 $system_read(Config,NewCadEquips,Braco_Esquerdo) }
n125=  if ($system_read(Config,NewCadEquips,Pernas) != Vazio) { armor add $1 $system_read(Config,NewCadEquips,Pernas) }
n126=  if ($system_read(Config,NewCadEquips,Pes) != Vazio) { armor add $1 $system_read(Config,NewCadEquips,Pes) }
n127=
n128=  ;Acessorios iniciais
n129=  $db($1,Acessorios,List,$system_read(Config,NewCadAcess,List)).write
n130=  if ($system_read(Config,NewCadAcess,Cabeca) != Vazio) { acess add $1 $system_read(Config,NewCadAcess,Cabeca) }
n131=  if ($system_read(Config,NewCadAcess,Pescoco) != Vazio) { acess add $1 $system_read(Config,NewCadAcess,Pescoco) }
n132=  if ($system_read(Config,NewCadAcess,Orelhas) != Vazio) { acess add $1 $system_read(Config,NewCadAcess,Orelhas) }
n133=  if ($system_read(Config,NewCadAcess,Dedos) != Vazio) { acess add $1 $system_read(Config,NewCadAcess,Dedos) }
n134=
n135=
n136=  ;setandos habilidades iniciais
n137=  var %x = 1, %z = $numtok($system_read(Racas,$db($1,Dados,Raca).read,Habs),32)
n138=  while (%x <= %z) {
n139=    var %h = $db($1,Habs,List).read, %n = $gettok($system_read(Racas,$db($1,Dados,Raca).read,Habs),%x,32)
n140=
n141=    $db($1,Habs,List,%h %n).write
n142=    $db($1,Habs,%n,1).write
n143=    inc %x
n144=  }
n145=
n146=
n147=  ;aparencias
n148=  $db($1,Aparencia,Coracao,100).write
n149=  $db($1,Aparencia,Felicidade,100).write
n150=
n151=  ;$db($1,Aparencia,Fome,100).write
n152=  ;$db($1,Aparencia,Banheiro,0).write
n153=
n154=  if ($db($1,Dados,Raca).read == Saiya-jin) || ($db($1,Dados,Raca).read == Changeling) || ($db($1,Dados,Raca).read == Majin) || ($db($1,Dados,Raca).read == Androide) { $db($1,Aparencia,Rabo,100).write }
n155=
n156=  ;Itens iniciais
n157=  $db($1,Itens,List,$system_read(Config,NewCadItens,List)).write
n158=
n159=  ;capsulas iniciais (golpes)
n160=
n161=
n162=
n163=  ;fim (cadastro OK)
n164=  $db($1,Dados,UltIp,$chat($2).ip).write
n165=  $db($1,Dados,UltAcesso,$date $time $2).write
n166=  $db($1,Dados,ON,$true).write
n167=  $db($1,Dados,CadOK,$true).write
n168=
n169=}
n170=alias motd {
n171=  msg $+(=,$1) 5   __
n172=  msg $+(=,$1) 5  |  ""--.--.._                                7             __..    ,--.
n173=  msg $+(=,$1) 5  |       `.   "-.'""\_...-----..._   ,--. .--.7.-----.._.""|   |   /   /
n174=  msg $+(=,$1) 5  |_   _    \__   ).  \           7_5/7_5 |   \|  |7|  ..    >  `.  |  /   /
n175=  msg $+(=,$1) 5    | | `.   ._)  /|\  \ .-"""":7-"   "-.5   `  |7|  |.'  ,'`. |  |_/_  /
n176=  msg $+(=,$1) 5    | |_.'   |   / ""`  \  ===7/  4..|..7  \5     |7|      < ""  `.  "  |/__
n177=  msg $+(=,$1) 5    `.      .    \ ,--   \-..-7\   4/"\7   /5     |7|  |>   )--   |    /    |
n178=  msg $+(=,$1) 5     |__..-'__||__\   |___\ __.:7-.._..-'5_|\___|7|____..-/  |__|--""____/
n179=  msg $+(=,$1) 7
n180=  msg $+(=,$1) 4                              _______________________
n181=  msg $+(=,$1) 4                             /                      ,'
n182=  msg $+(=,$1) 4                            /      ___            ,'
n183=  msg $+(=,$1) 4                           /   _.-'  ,'        ,-'   /
n184=  msg $+(=,$1) 4                          / ,-' ,--.'        ,'   .'/
n185=  msg $+(=,$1) 4                         /.'     `.         '.  ,' /
n186=  msg $+(=,$1) 4                        /      ,-'       ,"--','  /
n187=  msg $+(=,$1) 4                             ,'        ,'  ,'    /
n188=  msg $+(=,$1) 4                            ,-'      ,' .-'     /
n189=  msg $+(=,$1) 4                         ,-'                   /
n190=  msg $+(=,$1) 4                       ,:_____________________/      DRAGON BALL Z
n191=  msg $+(=,$1) 7
n192=  msg $+(=,$1) 7                  .-.   .-.   .-.   .-.   .-.   .-.   .-.
n193=  msg $+(=,$1) 7                 ( 4*7 ) ( 4:7 ) (4'*.7) (4: :7) (4:-:7) (4:::7) (4(-)7)
n194=  msg $+(=,$1) 7                  `-'   `-'   `-'   `-'   `-'   `-'   `-'
n195=  msg $+(=,$1) 7
n196=  msg $+(=,$1) 15·14
n197=  msg $+(=,$1) 15+------------------ [    02Dicas15    ] ------------------+
n198=  msg $+(=,$1) 15
n199=  msg $+(=,$1) 15 14Versão02 $botversion $+ 15, "1DragonBall Z MMORpg15"
n200=  msg $+(=,$1) 15
n201=  msg $+(=,$1) 15 15·14 Para 1falar14 no chat, simplesmente digite o que quer falar.
n202=  msg $+(=,$1) 15 15·14 Para informações à respeito de você, digite 02.Dados
n203=  msg $+(=,$1) 15 15·14 Para ver o seu inventário, digite 02.Inventario
n204=  msg $+(=,$1) 15 15·14 Para mostrar o mapa e se localizar, digite 02.Mapa
n205=  msg $+(=,$1) 15 15·14 Para informações sobre o bot, digite 02.Staff
n206=  msg $+(=,$1) 15
n207=  msg $+(=,$1) 15 15·14 Para outros comandos e informações, digite 02.Ajuda
n208=  msg $+(=,$1) 15
n209=  msg $+(=,$1) 15+-----------------------------------------------------+
n210=  msg $+(=,$1) 15·14
n211=}
n212=alias conn_close {
n213=
n214=  if ($dbt($1,pers).read == $null) { if ($dbt($1,state).read) remini system/temp.ini $1 | if ($chat($1)) { close -c $+ $chat($1,0) $1 } | halt }
n215=
n216=  ;comando descadastrar
n217=  if ($1 == -r) { if ($exists($+($id_chrdir,/,$dbt($1,pers).read,.ini))) { remove $+($id_chrdir,/,$dbt($1,pers).read,.ini) | if ($chat($1)) { close -c $+ $chat($1,0) $1 } } }
n218=
n219=  ;verifica se ta cadastrado
n220=  if ($db($dbt($1,pers).read,Dados,CadOK).read != $true) {
n221=    if ($exists($+($id_chrdir,/,$dbt($1,pers).read,.ini))) remove $+($id_chrdir,/,$dbt($1,pers).read,.ini)
n222=    if ($dbt($1,state).read) remini system/temp.ini $1
n223=    if ($chat($1)) { close -c $+ $chat($1,0) $1 }
n224=    halt
n225=  }
n226=
n227=  ;termina a luta (se tiver ocorrendo uma)
n228=
n229=
n230=  ;final
n231=  $db($dbt($1,pers).read,Dados,ON,$false).write
n232=  if ($chat($1)) { close -c $+ $chat($1,0) $1 }
n233=  if (% [ $+ [ $nick $+ .id ] ] != $null) { unset % [ $+ [ $nick $+ .id ] ] }
n234=  if ($dbt($1,state).read) remini system/temp.ini $1
n235=
n236=}
n237=;amor <add/rem/verific> <pers> <armor>
n238=alias armor {
n239=  if ($1 == add) {
n240=    ;verifica se esta vazio o slot
n241=    if ($db($2,Equips,$system_read(Equipamentos,$3,Where)).read == Vazio) {
n242=
n243=      ;equipa o item
n244=      $db($2,Equips,$system_read(Equipamentos,$3,Where),$pers<($system_read(Equipamentos,$3,Nome))).write
n245=
n246=      ;tira o equip da lista e poe no lugar equipado
n247=      if ($numtok($db($2,Equips,List).read,32) == 1) && ($gettok($db($2,Equips,List).read,1,32) == $pers<($system_read(Equipamentos,$3,Nome))) { $db($2,Equips,List,Vazio).write }
n248=      else { $db($2,Equips,List,$remtok($db($2,Equips,List).read , $3, 32)).write }
n249=    }
n250=    else {
n251=      ;grava o nome do equip a ser retirado
n252=      var % [ $+ [ $2 $+ .EquipsSetado ] ] $db($2,Equips,$system_read(Equipamentos,$3,Where)).read
n253=
n254=      ;tira os bonus do equip equipado
n255=      if ($system_read(Equipamentos,$db($2,Equips,$system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Where)).read,Effects) != none) {
n256=        var % [ $+ [ $2 $+ .x ] ] 0
n257=        while (% [ $+ [ $2 $+ .x ] ] < $numtok($system_read(Equipamentos,$db($2,Equips,$system_read(Equipamentos,$3,Where)).read,Effects),32)) {
n258=          inc % [ $+ [ $2 $+ .x ] ]
n259=
n260=          if ($left($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),1) == +) { var % [ $+ [ $2 $+ .EquipSinal ] ] - }
n261=          else { var % [ $+ [ $2 $+ .EquipSinal ] ] + }
n262=
n263=          $db($2,Atributos,$right($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1) , $calc( $db($2,Atributos,$right($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)).read % [ $+ [ $2 $+ .EquipSinal ] ] $system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],$right($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)) )).write
n264=        }
n265=      }
n266=
n267=      ;poem na lista de volta
n268=      if ($db($2,Equips,List).read == Vazio) { $db($2,Equips,List,% [ $+ [ $2 $+ .EquipsSetado ] ]).write }
n269=      else { $db($2,Equips,List,$addtok($db($2,Equips,List).read,% [ $+ [ $2 $+ .EquipsSetado ] ], 32)).write }
n270=
n271=      ;coloca o novo equip no novo lugar
n272=      $db($2,Equips,$system_read(Equipamentos,$3,Where),$pers<($system_read(Equipamentos,$3,Nome))).write
n273=      $db($2,Equips,List,$remtok($db($2,Equips,List).read , $3, 32)).write
n274=
n275=      if ($4) { msg $+(=,$4) 15·02 % [ $+ [ $2 $+ .EquipsSetado ] ] 14retirado. }
n276=    }
n277=    ;adicionando o bonus do equip, se houver
n278=    if ($system_read(Equipamentos,$3,Effects) != none) {
n279=
n280=      var % [ $+ [ $2 $+ .y ] ] 0
n281=      while (% [ $+ [ $2 $+ .y ] ] < $numtok($system_read(Equipamentos,$3,Effects),32)) {
n282=        inc % [ $+ [ $2 $+ .y ] ]
n283=
n284=        $db($2,Atributos,$right($gettok($system_read(Equipamentos,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),-1), $calc( $db($2,Atributos,$right($gettok($system_read(Equipamentos,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),-1)).read $left($gettok($system_read(Equipamentos,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),1) $system_read(Equipamentos,$3,$right($gettok($system_read(Equipamentos,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),-1)) )).write 
n285=      }
n286=    }
n287=    ;Calcular Hp, Ki e Cp
n288=    var % [ $+ [ $2 $+ .Hp ] ] $round($calc($db($2,Atributos,XCons).read * $system_read(Racas,$db($2,Dados,Raca).read,HPx)),0)
n289=    $db($2,Battle,HpMax,% [ $+ [ $2 $+ .Hp ] ]).write
n290=
n291=    var % [ $+ [ $2 $+ .Ki ] ] $round($calc($db($2,Atributos,XInt).read * $system_read(Racas,$db($2,Dados,Raca).read,Ki)),0)
n292=    $db($2,Battle,KiMax,% [ $+ [ $2 $+ .Ki ] ]).write
n293=
n294=    var % [ $+ [ $2 $+ .Cp ] ] $round($calc($db($2,Atributos,XRes).read + $db($2,Atributos,XDes).read * $system_read(Racas,$db($2,Dados,Raca).read,Cp)),0)
n295=    $db($2,Battle,CpMax,% [ $+ [ $2 $+ .Cp ] ]).write
n296=
n297=    recheck_stats $2
n298=
n299=    if ($4) { msg $+(=,$4) 15·02 $pers>($system_read(Equipamentos,$3,Nome)) 14equipado. }
n300=  }
n301=
n302=  elseif ($1 == rem) {
n303=    ;verifica se o slot está vazio
n304=    if ($db($2,Equips,$system_read(Equipamentos,$3,Where)).read == Vazio) { halt }
n305=
n306=    ;grava o nome do equip a ser retirado
n307=    var % [ $+ [ $2 $+ .EquipsSetado ] ] $db($2,Equips,$system_read(Equipamentos,$3,Where)).read
n308=
n309=    ;tira os bonus do equip equipado
n310=    if ($system_read(Equipamentos,$db($2,Equips,$system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Where)).read,Effects) != none) {
n311=      var % [ $+ [ $2 $+ .x ] ] 0
n312=      while (% [ $+ [ $2 $+ .x ] ] < $numtok($system_read(Equipamentos,$db($2,Equips,$system_read(Equipamentos,$3,Where)).read,Effects),32)) {
n313=        inc % [ $+ [ $2 $+ .x ] ]
n314=
n315=        if ($left($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),1) == +) { var % [ $+ [ $2 $+ .EquipSinal ] ] - }
n316=        else { var % [ $+ [ $2 $+ .EquipSinal ] ] + }
n317=
n318=        $db($2,Atributos,$right($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1), $calc( $db($2,Atributos,$right($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)).read % [ $+ [ $2 $+ .EquipSinal ] ] $system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],$right($gettok($system_read(Equipamentos,% [ $+ [ $2 $+ .EquipsSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)) )).write
n319=      }
n320=    }
n321=
n322=    ;Calcular Hp, Ki e Cp
n323=    var % [ $+ [ $2 $+ .Hp ] ] $round($calc($db($2,Atributos,XCons).read * $system_read(Racas,$db($2,Dados,Raca).read,HPx)),0)
n324=    $db($2,Battle,HpMax,% [ $+ [ $2 $+ .Hp ] ]).write
n325=
n326=    var % [ $+ [ $2 $+ .Ki ] ] $round($calc($db($2,Atributos,XInt).read * $system_read(Racas,$db($2,Dados,Raca).read,Ki)),0)
n327=    $db($2,Battle,KiMax,% [ $+ [ $2 $+ .Ki ] ]).write
n328=
n329=    var % [ $+ [ $2 $+ .Cp ] ] $round($calc($db($2,Atributos,XRes).read + $db($2,Atributos,XDes).read * $system_read(Racas,$db($2,Dados,Raca).read,Cp)),0)
n330=    $db($2,Battle,CpMax,% [ $+ [ $2 $+ .Cp ] ]).write
n331=
n332=    recheck_stats $2
n333=
n334=    ;poem na lista de volta
n335=    if ($db($2,Equips,List).read == Vazio) { $db($2,Equips,List,% [ $+ [ $2 $+ .EquipsSetado ] ]).write }
n336=    else { $db($2,Equips,List,$addtok($db($2,Equips,List).read,% [ $+ [ $2 $+ .EquipsSetado ] ], 32)).write }
n337=
n338=    $db($2,Equips,$system_read(Equipamentos,$3,Where),Vazio).write
n339=
n340=    if ($4) { msg $+(=,$4) 15·02 $pers>($system_read(Equipamentos,$3,Nome)) 14retirado. }
n341=  }
n342=
n343=  ;armor <exists> <armor>
n344=  elseif ($1 == exists) { if ($istok($system_read(Equipamentos,Equips,List),$2,32)) { return $true } | else { return $false } }
n345=
n346=  ;armor <where> <armor>
n347=  elseif ($1 == where) { return $system_read(Equipamentos,$2,Where) }
n348=
n349=  ;armor <have> <pers> <armor>
n350=  elseif ($1 == have) {
n351=    if ($istok($db($2,Equips,List).read,$3,32)) { return $true }
n352=    elseif ($istok($db($2,Equips,Cabeca).read,$3,32)) { return $true }
n353=    elseif ($istok($db($2,Equips,Corpo).read,$3,32)) { return $true }
n354=    elseif ($istok($db($2,Equips,Braco_Direito).read,$3,32)) { return $true }
n355=    elseif ($istok($db($2,Equips,Braco_Esquerdo).read,$3,32)) { return $true }
n356=    elseif ($istok($db($2,Equips,Pernas).read,$3,32)) { return $true }
n357=    elseif ($istok($db($2,Equips,Pes).read,$3,32)) { return $true }
n358=    else { return $false }
n359=  }
n360=  elseif ($1 == search) {
n361=    if ($istok($db($2,Equips,List).read,$3,32)) { return List }
n362=    elseif ($istok($db($2,Equips,Cabeca).read,$3,32)) { return Cabeca }
n363=    elseif ($istok($db($2,Equips,Corpo).read,$3,32)) { return Corpo }
n364=    elseif ($istok($db($2,Equips,Braco_Direito).read,$3,32)) { return Braco_Direito }
n365=    elseif ($istok($db($2,Equips,Braco_Esquerdo).read,$3,32)) { return Braco_Esquerdo }
n366=    elseif ($istok($db($2,Equips,Pernas).read,$3,32)) { return Pernas }
n367=    elseif ($istok($db($2,Equips,Pes).read,$3,32)) { return Pes }
n368=    else { return Vazio }
n369=  }
n370=}
n371=alias acess {
n372=  if ($1 == add) {
n373=    ;verifica se esta vazio o slot
n374=    if ($db($2,Acessorios,$system_read(Acessorios,$3,Where)).read == Vazio) {
n375=
n376=      ;equipa o item
n377=      $db($2,Acessorios,$system_read(Acessorios,$3,Where),$pers<($system_read(Acessorios,$3,Nome))).write
n378=
n379=      ;tira o acessorio da lista e poe no lugar equipado
n380=      if ($numtok($db($2,Acessorios,List).read,32) == 1) && ($gettok($db($2,Acessorios,List).read,1,32) == $pers<($system_read(Acessorios,$3,Nome))) { $db($2,Acessorios,List,Vazio).write }
n381=      else { $db($2,Acessorios,List,$remtok($db($2,Acessorios,List).read , $3, 32)).write }
n382=    }
n383=    else {
n384=      ;grava o nome do acessorio a ser retirado
n385=      var % [ $+ [ $2 $+ .AcessSetado ] ] $db($2,Acessorios,$system_read(Acessorios,$3,Where)).read
n386=
n387=      ;tira os bonus do acessorio equipado
n388=      if ($system_read(Acessorios,$db($2,Acessorios,$system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Where)).read,Effects) != none) {
n389=        var % [ $+ [ $2 $+ .x ] ] 0
n390=        while (% [ $+ [ $2 $+ .x ] ] < $numtok($system_read(Acessorios,$db($2,Acessorios,$system_read(Acessorios,$3,Where)).read,Effects),32)) {
n391=          inc % [ $+ [ $2 $+ .x ] ]
n392=
n393=          if ($left($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),1) == +) { var % [ $+ [ $2 $+ .AcessSinal ] ] - }
n394=          else { var % [ $+ [ $2 $+ .AcessSinal ] ] + }
n395=
n396=          $db($2,Atributos,$right($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1), $calc( $db($2,Atributos,$right($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)).read % [ $+ [ $2 $+ .AcessSinal ] ] $system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],$right($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)) )).write
n397=        }
n398=      }
n399=
n400=      ;poem na lista de volta
n401=      if ($db($2,Acessorios,List).read == Vazio) { $db($2,Acessorios,List,% [ $+ [ $2 $+ .AcessSetado ] ]).write }
n402=      else { $db($2,Acessorios,List,$addtok($db($2,Acessorios,List).read,% [ $+ [ $2 $+ .AcessSetado ] ], 32)).write }
n403=
n404=      ;coloca o novo acess no novo lugar
n405=      $db($2,Acessorios,$system_read(Acessorios,$3,Where),$pers<($system_read(Acessorios,$3,Nome))).write
n406=      $db($2,Acessorios,List,$remtok($db($2,Acessorios,List).read , $3, 32)).write
n407=
n408=      if ($4) { msg $+(=,$4) 15·02 % [ $+ [ $2 $+ .AcessSetado ] ] 14retirado. }
n409=    }
n410=
n411=
n412=    ;adicionando o bonus do acessorio, se houver
n413=    if ($system_read(Acessorios,$3,Effects) != none) {
n414=
n415=      var % [ $+ [ $2 $+ .y ] ] 0
n416=      while (% [ $+ [ $2 $+ .y ] ] < $numtok($system_read(Acessorios,$3,Effects),32)) {
n417=        inc % [ $+ [ $2 $+ .y ] ]
n418=
n419=        $db($2,Atributos,$right($gettok($system_read(Acessorios,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),-1), $calc( $db($2,Atributos,$right($gettok($system_read(Acessorios,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),-1)).read $left($gettok($system_read(Acessorios,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),1) $system_read(Acessorios,$3,$right($gettok($system_read(Acessorios,$3,Effects),% [ $+ [ $2 $+ .y ] ],32),-1)) )).write
n420=      }
n421=    }
n422=
n423=    ;Calcular Hp, Ki e Cp
n424=    var % [ $+ [ $2 $+ .Hp ] ] $round($calc($db($2,Atributos,XCons).read * $system_read(Racas,$db($2,Dados,Raca).read,HPx)),0)
n425=    $db($2,Battle,HpMax,% [ $+ [ $2 $+ .Hp ] ]).write
n426=
n427=    var % [ $+ [ $2 $+ .Ki ] ] $round($calc($db($2,Atributos,XInt).read * $system_read(Racas,$db($2,Dados,Raca).read,Ki)),0)
n428=    $db($2,Battle,KiMax,% [ $+ [ $2 $+ .Ki ] ]).write
n429=
n430=    var % [ $+ [ $2 $+ .Cp ] ] $round($calc($db($2,Atributos,XRes).read + $db($2,Atributos,XDes).read * $system_read(Racas,$db($2,Dados,Raca).read,Cp)),0)
n431=    $db($2,Battle,CpMax,% [ $+ [ $2 $+ .Cp ] ]).write
n432=
n433=    recheck_stats $2
n434=
n435=    if ($4) { msg $+(=,$4) 15·02 $pers>($system_read(Acessorios,$3,Nome)) 14equipado. }
n436=
n437=  }
n438=  elseif ($1 == rem) {
n439=    ;verifica se o slot está vazio
n440=    if ($db($2,Acessorios,$system_read(Acessorios,$3,Where)).read == Vazio) { halt }
n441=
n442=    ;grava o nome do acessorio a ser retirado
n443=    var % [ $+ [ $2 $+ .AcessSetado ] ] $db($2,Acessorios,$system_read(Acessorios,$3,Where)).read
n444=
n445=    ;tira os bonus do acessorio equipado
n446=    if ($system_read(Acessorios,$db($2,Acessorios,$system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Where)).read,Effects) != none) {
n447=      var % [ $+ [ $2 $+ .x ] ] 0
n448=      while (% [ $+ [ $2 $+ .x ] ] < $numtok($system_read(Acessorios,$db($2,Acessorios,$system_read(Acessorios,$3,Where)).read,Effects),32)) {
n449=        inc % [ $+ [ $2 $+ .x ] ]
n450=
n451=        if ($left($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),1) == +) { var % [ $+ [ $2 $+ .AcessSinal ] ] - }
n452=        else { var % [ $+ [ $2 $+ .AcessSinal ] ] + }
n453=
n454=        $db($2,Atributos,$right($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1), $calc( $db($2,Atributos,$right($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)).read % [ $+ [ $2 $+ .AcessSinal ] ] $system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],$right($gettok($system_read(Acessorios,% [ $+ [ $2 $+ .AcessSetado ] ],Effects),% [ $+ [ $2 $+ .x ] ],32),-1)) )).write
n455=      }
n456=    }
n457=
n458=    ;Calcular Hp, Ki e Cp
n459=    var % [ $+ [ $2 $+ .Hp ] ] $round($calc($db($2,Atributos,XCons).read * $system_read(Racas,$db($2,Dados,Raca).read,HPx)),0)
n460=    $db($2,Battle,HpMax,% [ $+ [ $2 $+ .Hp ] ]).write
n461=
n462=    var % [ $+ [ $2 $+ .Ki ] ] $round($calc($db($2,Atributos,XInt).read * $system_read(Racas,$db($2,Dados,Raca).read,Ki)),0)
n463=    $db($2,Battle,KiMax,% [ $+ [ $2 $+ .Ki ] ]).write
n464=
n465=    var % [ $+ [ $2 $+ .Cp ] ] $round($calc($db($2,Atributos,XRes).read + $db($2,Atributos,XDes).read * $system_read(Racas,$db($2,Dados,Raca).read,Cp)),0)
n466=    $db($2,Battle,CpMax,% [ $+ [ $2 $+ .Cp ] ]).write
n467=
n468=    recheck_stats $2
n469=
n470=    ;poem na lista de volta
n471=    if ($db($2,Acessorios,List).read == Vazio) { $db($2,Acessorios,List,% [ $+ [ $2 $+ .AcessSetado ] ]).write }
n472=    else { $db($2,Acessorios,List,$addtok($db($2,Acessorios,List).read,% [ $+ [ $2 $+ .AcessSetado ] ], 32)).write }
n473=
n474=    $db($2,Acessorios,$system_read(Acessorios,$3,Where),Vazio).write
n475=
n476=    if ($4) { msg $+(=,$4) 15·02 $pers>($system_read(Acessorios,$3,Nome)) 14retirado. }
n477=  }
n478=
n479=  elseif ($1 == exists) { if ($istok($system_read(Acessorios,Acessorios,List),$2,32)) { return $true } | else { return $false } }
n480=
n481=  elseif ($1 == where) { return $system_read(Acessorios,$2,Where) }
n482=
n483=  elseif ($1 == have) {
n484=    if ($istok($db($2,Acessorios,List).read,$3,32)) { return $true }
n485=    elseif ($istok($db($2,Acessorios,Cabeca).read,$3,32)) { return $true }
n486=    elseif ($istok($db($2,Acessorios,Pescoco).read,$3,32)) { return $true }
n487=    elseif ($istok($db($2,Acessorios,Orelhas).read,$3,32)) { return $true }
n488=    elseif ($istok($db($2,Acessorios,Dedos).read,$3,32)) { return $true }
n489=    else { return $false }
n490=  }
n491=  elseif ($1 == search) {
n492=    if ($istok($db($2,Acessorios,List).read,$3,32)) { return List }
n493=    elseif ($istok($db($2,Acessorios,Cabeca).read,$3,32)) { return Cabeca }
n494=    elseif ($istok($db($2,Acessorios,Pescoco).read,$3,32)) { return Pescoco }
n495=    elseif ($istok($db($2,Acessorios,Orelhas).read,$3,32)) { return Orelhas }
n496=    elseif ($istok($db($2,Acessorios,Dedos).read,$3,32)) { return Dedos }
n497=    else { return Vazio }
n498=  }
n499=}
n500=;reload_ultignore <nick> <ip>
n501=alias reload_ultignore { $system_write(Acessos,UltAcesso,Nick,$1) | $system_write(Acessos,UltAcesso,Ip,$2) | $system_write(Acessos,UltAcesso,Data,$date) | $system_write(Acessos,UltAcesso,Hora,$time) }
n502=alias chatall {
n503=  var %x = 0
n504=  while (%x < $chat(0)) {
n505=    inc %x
n506=    if ($db($dbt($chat(%x),pers).read,Dados,ON).read != $true) { goto D }
n507=    msg $+(=,$chat(%x)) $1-
n508=    :D
n509=  }
n510=  return $null 
n511=}
n512=alias chatmap {
n513=  var %x = 0
n514=  while (%x < $chat(0)) {
n515=    inc %x
n516=    if ($db($dbt($chat(%x),pers).read,Dados,ON).read != $true) { goto D }
n517=    if ($db($dbt($chat(%x),pers).read,Mud,Map).read != $db($pers,Mud,Map).read) { goto D }
n518=    if ($1 == REGION) {
n519=      if ($calc($db($dbt($nick,pers).read,Mud,X).read - $db($dbt($chat(%x),pers).read,Mud,X).read) > 8) { goto D }
n520=      if ($calc($db($dbt($nick,pers).read,Mud,X).read + $db($dbt($chat(%x),pers).read,Mud,X).read) < 8) { goto D }
n521=      if ($calc($db($dbt($nick,pers).read,Mud,Y).read - $db($dbt($chat(%x),pers).read,Mud,Y).read) > 3) { goto D }
n522=      if ($calc($db($dbt($nick,pers).read,Mud,Y).read + $db($dbt($chat(%x),pers).read,Mud,Y).read) < 3) { goto D }
n523=    }
n524=    if ($chat(%x) == $nick) && ($1 != ALL) && ($1 != REGION) { goto D }
n525=    msg $+(=,$chat(%x)) $2-
n526=    :D
n527=  }
n528=  return $null 
n529=}
n530=
n531=;check_location <planeta> <pos.x> <pos.y>
n532=alias check_location {
n533=  var %x 1
n534=  while (%x <= $findfile(characters/,*.ini,0)) {
n535=    var %pers $remove($nopath($findfile(characters/,*.ini,%x)),.ini)
n536=    if ($db(%pers,Mud,X).read == $2) && ($db(%pers,Mud,Y).read == $3) && ($db(%pers,Mud,Map).read == $1) && ($db(%pers,Dados,ON).read == $true) { return %pers }
n537=    inc %x
n538=  }
n539=  var %y 1
n540=  while (%y <= $numtok($system_read(Npcs,Npc,List),32)) {
n541=    var %npc $gettok($system_read(Npcs,Npc,List),%y,32)
n542=    if ($system_read(Npcs,$gettok($system_read(Npcs,Npc,List),%y,32),X) == $2) && ($system_read(Npcs,$gettok($system_read(Npcs,Npc,List),%y,32),Y) == $3) && ($system_read(Npcs,$gettok($system_read(Npcs,Npc,List),%y,32),Map) == $1) { return %npc }
n543=    inc %y
n544=  }
n545=}
n546=;show.player <pers> <nick>
n547=alias show.player { Show.map $1 $db($1,Mud,X).read $db($1,Mud,Y).read $db($1,Mud,Map).read $2 }
n548=
n549=;show.map <pers> <x> <y> <planeta> <nick>
n550=alias Show.map {
n551=  msg $+(=,$5) 15·14 Você está em1 Satan City 15(14X02 $+ $2 14Y02 $+ $3 $+ 15)
n552=
n553=  ;tamanho maximo de exibição de mapa
n554=  var % [ $+ [ $5 $+ .x.start ] ] $calc($2 - $system_read(Config,Game,Maxview_X) )
n555=  var % [ $+ [ $5 $+ .x.final ] ] $calc($2 + $system_read(Config,Game,Maxview_X) )
n556=  var % [ $+ [ $5 $+ .y.start ] ] $calc($3 - $system_read(Config,Game,Maxview_Y) ) 
n557=  var % [ $+ [ $5 $+ .y.final ] ] $calc($3 + $system_read(Config,Game,Maxview_Y) )
n558=
n559=  ;X
n560=  if (% [ $+ [ $5 $+ .x.start ] ] < 0) { dec % [ $+ [ $5 $+ .x.final ] ] % [ $+ [ $5 $+ .x.start ] ] | var % [ $+ [ $5 $+ .x.start ] ] 1 }
n561=  if (% [ $+ [ $5 $+ .x.final ] ] > $len($read($+(system/,$4,.txt)))) { dec % [ $+ [ $5 $+ .x.start ] ] $calc(% [ $+ [ $5 $+ .x.final ] ] - $len($read($+(system/,$4,.txt)))) | var % [ $+ [ $5 $+ .x.final ] ] $len($read($+(system/,$4,.txt))) }
n562=  if (% [ $+ [ $5 $+ .x.start ] ] < 0) { var % [ $+ [ $5 $+ .x.start ] ] 1 }
n563=
n564=  ;Y
n565=  if (% [ $+ [ $5 $+ .y.start ] ] < 0) { dec % [ $+ [ $5 $+ .y.final ] ] % [ $+ [ $5 $+ .y.start ] ] | var % [ $+ [ $5 $+ .y.start ] ] 1 }
n566=  if (% [ $+ [ $5 $+ .y.final ] ] > $lines($+(system/,$4,.txt))) { dec % [ $+ [ $5 $+ .y.start ] ] $calc(% [ $+ [ $5 $+ .y.final ] ] - $lines($+(system/,$4,.txt))) | var % [ $+ [ $5 $+ .y.final ] ] $lines($+(system/,$4,.txt)) }
n567=  if (% [ $+ [ $5 $+ .y.start ] ] < 0) { var % [ $+ [ $5 $+ .y.start ] ] 1 }
n568=
n569=  showmap % [ $+ [ $5 $+ .x.start ] ] % [ $+ [ $5 $+ .x.final ] ] % [ $+ [ $5 $+ .y.start ] ] % [ $+ [ $5 $+ .y.final ] ] $1 $4 $5
n570=}
n571=
n572=;showmap <x.pos.start> <x.pos.final> <y.pos.start> <y.pos.final> <pers> <planeta> <nick>
n573=alias showmap {
n574=  var % [ $+ [ $7 $+ .x.start ] ] $1
n575=  var % [ $+ [ $7 $+ .x.final ] ] $2
n576=  var % [ $+ [ $7 $+ .y.start ] ] $3
n577=  var % [ $+ [ $7 $+ .y.final ] ] $4
n578=  var % [ $+ [ $7 $+ .map ] ] $+(system/,$6,.txt)
n579=  var % [ $+ [ $7 $+ .lines ] ] % [ $+ [ $7 $+ .y.final ] ]
n580=
n581=  if (% [ $+ [ $7 $+ .y.final ] ] > % [ $+ [ $7 $+ .lines ] ]) { var % [ $+ [ $7 $+ .lines ] ] $lines(% [ $+ [ $7 $+ .map ] ]) }
n582=
n583=  var % [ $+ [ $7 $+ .line.while ] ] % [ $+ [ $7 $+ .y.start ] ]
n584=
n585=  while (% [ $+ [ $7 $+ .line.while ] ] <= % [ $+ [ $7 $+ .lines ] ]) {
n586=    var % [ $+ [ $7 $+ .line ] ] $read(% [ $+ [ $7 $+ .map ] ],% [ $+ [ $7 $+ .line.while ] ])
n587=    var % [ $+ [ $7 $+ .line.len ] ] % [ $+ [ $7 $+ .x.final ] ]
n588=
n589=    if (% [ $+ [ $7 $+ .x.final ] ] > % [ $+ [ $7 $+ .line.len ] ]) { var % [ $+ [ $7 $+ .line.len ] ] $len(% [ $+ [ $7 $+ .line ] ]) }
n590=
n591=    var % [ $+ [ $7 $+ .line.char ] ] % [ $+ [ $7 $+ .x.start ] ]
n592=
n593=    unset % [ $+ [ $7 $+ .line.pls ] ] 
n594=    unset % [ $+ [ $7 $+ .line.pls.display ] ]
n595=    unset % [ $+ [ $7 $+ .line.display ] ]
n596=    unset % [ $+ [ $7 $+ .line.display.last ] ]
n597=
n598=    while (% [ $+ [ $7 $+ .line.char ] ] <= % [ $+ [ $7 $+ .line.len ] ]) {
n599=      if ($check_location($6,% [ $+ [ $7 $+ .line.char ] ],% [ $+ [ $7 $+ .line.while ] ]) != $null) {
n600=        if ($5 == $check_location($6,% [ $+ [ $7 $+ .line.char ] ],% [ $+ [ $7 $+ .line.while ] ])) {
n601=          var % [ $+ [ $7 $+ .line.display ] ] % [ $+ [ $7 $+ .line.display ] ] $+ $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),npc.player,4) $+ *
n602=          var % [ $+ [ $7 $+ .line.pls ] ] % [ $+ [ $7 $+ .line.pls ] ]  $check_location($6,% [ $+ [ $7 $+ .line.char ] ],% [ $+ [ $7 $+ .line.while ] ])
n603=          var % [ $+ [ $7 $+ .line.display.last ] ] $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),npc.player,4) $+ * 
n604=          goto fim2
n605=        }
n606=        elseif ($istok($system_read(Npcs,Npc,List),$check_location($6,% [ $+ [ $7 $+ .line.char ] ],% [ $+ [ $7 $+ .line.while ] ]),32)) {
n607=          var % [ $+ [ $7 $+ .line.display ] ] % [ $+ [ $7 $+ .line.display ] ] $+ $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),npc.player,5) $+ *
n608=          var % [ $+ [ $7 $+ .line.pls ] ] % [ $+ [ $7 $+ .line.pls ] ]  $check_location($6,% [ $+ [ $7 $+ .line.char ] ],% [ $+ [ $7 $+ .line.while ] ])
n609=          var % [ $+ [ $7 $+ .line.display.last ] ] $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),npc.player,5) $+ * 
n610=          goto fim2
n611=        } 
n612=        else {
n613=          var % [ $+ [ $7 $+ .line.display ] ] % [ $+ [ $7 $+ .line.display ] ] $+ $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),npc.player,1) $+ *
n614=          var % [ $+ [ $7 $+ .line.pls ] ]  % [ $+ [ $7 $+ .line.pls ] ] $check_location($6,% [ $+ [ $7 $+ .line.char ] ],% [ $+ [ $7 $+ .line.while ] ])
n615=          var % [ $+ [ $7 $+ .line.display.last ] ] $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),npc.player,1) $+ * 
n616=          goto fim2
n617=        }
n618=      }
n619=      else {
n620=        if (% [ $+ [ $7 $+ .line.display.last ] ] == $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),display)) { var % [ $+ [ $7 $+ .line.display ] ] % [ $+ [ $7 $+ .line.display ] ] $+ $right(% [ $+ [ $7 $+ .line.display.last ] ],1) }
n621=        else { var % [ $+ [ $7 $+ .line.display ] ] % [ $+ [ $7 $+ .line.display ] ] $+ $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),display) }
n622=      }
n623=
n624=      var % [ $+ [ $7 $+ .line.display.last ] ] $tile($mid(% [ $+ [ $7 $+ .line ] ],% [ $+ [ $7 $+ .line.char ] ],1),display)
n625=      :fim2
n626=      inc % [ $+ [ $7 $+ .line.char ] ]
n627=    }
n628=    if (% [ $+ [ $7 $+ .line.pls ] ]  != $null) {
n629=      var % [ $+ [ $7 $+ .line.dis ] ] 1
n630=
n631=      while (% [ $+ [ $7 $+ .line.dis ] ] <= $numtok(% [ $+ [ $7 $+ .line.pls ] ],32)) {
n632=        if ($gettok(% [ $+ [ $7 $+ .line.pls ] ] ,% [ $+ [ $7 $+ .line.dis ] ],32) == $5) {
n633=          if ($db($5,Dados,Admin).read == 100) { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 4*3 $gettok(% [ $+ [ $7 $+ .line.pls ] ] ,% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n634=          if ($db($5,Mud,PK).read == $true) { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 4*4 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n635=          if ($db($5,Mud,PVP).read == $true) { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 4*13 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n636=          else { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 4*02 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n637=          goto disppls
n638=        }
n639=        if ($istok($system_read(Npcs,Npc,List),$gettok(% [ $+ [ $7 $+ .line.pls ] ] ,% [ $+ [ $7 $+ .line.dis ] ],32),32)) {
n640=          var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 5*5 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls
n641=        }
n642=
n643=        if ($db($gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32),Mud,PK).read == $true) { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 1*4 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n644=        if ($db($gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32),Mud,PVP).read == $true) { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 1*13 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n645=        if ($db($gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32),Dados,Admin).read == 100) { var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 1*3 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32) | goto disppls }
n646=
n647=        var % [ $+ [ $7 $+ .line.pls.display ] ] % [ $+ [ $7 $+ .line.pls.display ] ] 1*1 $gettok(% [ $+ [ $7 $+ .line.pls ] ],% [ $+ [ $7 $+ .line.dis ] ],32)
n648=        :disppls
n649=        inc % [ $+ [ $7 $+ .line.dis ] ]
n650=      }
n651=      msg $+(=,$7) 15·     % [ $+ [ $7 $+ .line.display ] ]  $+  % [ $+ [ $7 $+ .line.pls.display ] ]
n652=    }
n653=    else { msg $+(=,$7) 15·     % [ $+ [ $7 $+ .line.display ] ] }
n654=    inc % [ $+ [ $7 $+ .line.while ] ]
n655=  }
n656=}
n657=alias tile {
n658=  if ($2 == npc.player) { return  $+ $3 $+ , $+ $gettok($gettok($system_read(TileSets,$asc($1),Display),2,32),2,44) }
n659=  if ($2 == display) {
n660=    if ($gettok($system_read(TileSets,$asc($1),Display),2,32) == $null) { return  $+ $gettok($system_read(TileSets,$asc($1),Display),1,32) }
n661=
n662=    else { return  $+ $gettok($system_read(TileSets,$asc($1),Display),2,32) $+ $gettok($system_read(TileSets,$asc($1),Display),1,32) }
n663=  }
n664=  else { return $system_read(TileSets,$asc($1),$2) }
n665=}
n666=
n667=;respawn <pers> <planeta> <nick> <pos.x> <pos.y>
n668=alias respawn {
n669=  var %x 0
n670=  var %location_respawn_x $iif(!$4,$gettok($system_read(Config,Respawn,$2),1,32),$4)
n671=  var %location_respawn_y $iif(!$5,$gettok($system_read(Config,Respawn,$2),2,32),$5)
n672=
n673=  while (%x <= 20) {
n674=    if ($check_location($2,$calc(%location_respawn_x + %x),%location_respawn_y) == $null) && ($tile($postile($2,$calc(%location_respawn_x + %x),%location_respawn_y),walk) == S) {
n675=      $db($1,Mud,X,$calc(%location_respawn_x + %x)).write
n676=      $db($1,Mud,Y,%location_respawn_y).write
n677=      $db($1,Mud,Map,$2).write
n678=      return
n679=    }
n680=    if ($check_location($2,$calc(%location_respawn_x - %x),%location_respawn_y) == $null) && ($tile($postile($2,$calc(%location_respawn_x - %x),%location_respawn_y),walk) == S) {
n681=      $db($1,Mud,X,$calc(%location_respawn_x - %x)).write
n682=      $db($1,Mud,Y,%location_respawn_y).write
n683=      $db($1,Mud,Map,$2).write
n684=      return
n685=    }
n686=    if ($check_location($2,%location_respawn_x,$calc(%location_respawn_y + %x)) == $null) && ($tile($postile($2,%location_respawn_x,$calc(%location_respawn_y + %x)),walk) == S) {
n687=      $db($1,Mud,X,%location_respawn_x).write
n688=      $db($1,Mud,Y,$calc(%location_respawn_y + %x)).write
n689=      $db($1,Mud,Map,$2).write
n690=      return
n691=    }
n692=    if ($check_location($2,%location_respawn_x,$calc(%location_respawn_y - %x)) == $null) && ($tile($postile($2,%location_respawn_x,$calc(%location_respawn_y - %x)),walk) == S) {
n693=      $db($1,Mud,X,%location_respawn_x).write
n694=      $db($1,Mud,Y,$calc(%location_respawn_y - %x)).write
n695=      $db($1,Mud,Map,$2).write
n696=      return
n697=    }
n698=    inc %x
n699=  }
n700=}
n701=alias postile {
n702=  if (($2 < 1) || ($3 < 1)) { return $null }
n703=  return $mid($read($+(system/,$1,.txt),$3),$2,1)
n704=}
n705=;move <destino> <pers> <nick>
n706=alias move.pers {
n707=  ;<-
n708=  if ($1 == O) {
n709=    if ($tile($postile($db($2,Mud,Map).read,$calc($db($2,Mud,X).read -1),$db($2,Mud,Y).read),walk) != S) { msg $+(=,$3) 15·14 Impossível ir lá. | halt }
n710=    if ($check_location($db($2,Mud,Map).read,$calc($db($2,Mud,X).read -1),$db($2,Mud,Y).read) != $null) { msg $+(=,$3) 15·14 Alguém está no 02caminho15. | halt }
n711=    $db($2,Mud,X,$calc($db($2,Mud,X).read -1)).write
n712=    msg $+(=,$3) 15·14 Você se moveu para o1 Oeste15. 15(14Coordenadas X02 $+ $db($2,Mud,X).read 14Y02 $+ $db($2,Mud,Y).read $+ 15)
n713=  }
n714=  ;->
n715=  if ($1 == L) {
n716=    if ($tile($postile($db($2,Mud,Map).read,$calc($db($2,Mud,X).read +1),$db($2,Mud,Y).read),walk) != S) { msg $+(=,$3) 15·14 Impossível ir lá. | halt }
n717=    if ($check_location($db($2,Mud,Map).read,$calc($db($2,Mud,X).read +1),$db($2,Mud,Y).read) != $null) { msg $+(=,$3) 15·14 Alguém está no 02caminho15. | halt }
n718=    $db($2,Mud,X,$calc($db($2,Mud,X).read +1)).write
n719=    msg $+(=,$3) 15·14 Você se moveu para o1 Leste15. 15(14Coordenadas X02 $+ $db($2,Mud,X).read 14Y02 $+ $db($2,Mud,Y).read $+ 15)
n720=  }
n721=  ;'
n722=  if ($1 == N) {
n723=    if ($tile($postile($db($2,Mud,Map).read,$db($2,Mud,X).read,$calc($db($2,Mud,Y).read -1)),walk) != S) { msg $+(=,$3) 15·14 Impossível ir lá. | halt }
n724=    if ($check_location($db($2,Mud,Map).read,$db($2,Mud,X).read,$calc($db($2,Mud,Y).read -1)) != $null) { msg $+(=,$3) 15·14 Alguém está no 02caminho15. | halt }
n725=    $db($2,Mud,Y,$calc($db($2,Mud,Y).read -1)).write
n726=    msg $+(=,$3) 15·14 Você se moveu para o1 Norte15. 15(14Coordenadas X02 $+ $db($2,Mud,X).read 14Y02 $+ $db($2,Mud,Y).read $+ 15)
n727=  } 
n728=  ;.
n729=  if ($1 == S) {
n730=    if ($tile($postile($db($2,Mud,Map).read,$db($2,Mud,X).read,$calc($db($2,Mud,Y).read +1)),walk) != S) { msg $+(=,$3) 15·14 Impossível ir lá. | halt }
n731=    if ($check_location($db($2,Mud,Map).read,$db($2,Mud,X).read,$calc($db($2,Mud,Y).read +1)) != $null) { msg $+(=,$3) 15·14 Alguém está no 02caminho15. | halt }
n732=    $db($2,Mud,Y,$calc($db($2,Mud,Y).read +1)).write
n733=    msg $+(=,$3) 15·14 Você se moveu para o1 Sul15. 15(14Coordenadas X02 $+ $db($2,Mud,X).read 14Y02 $+ $db($2,Mud,Y).read $+ 15)
n734=  }
n735=}
n736=
n737=;Para HP
n738=alias HPercent {
n739=  var %a 0
n740=  var %b 04,04
n741=  var %c 5
n742=  if $2 { var %p $int($calc(100* $1 / $2)) }
n743=  while %a < 10 {
n744=    if %a >= $int($calc(%p /10)) { var %b %b $+ 15,15 | var %c 15 }
n745=    if %a == 4 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 1,0,$left( [ %p ] ,1)) $+ %c | goto n }
n746=    if %a == 5 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 1,$left( [ %p ] ,1),$mid( [ %p ] ,2,1)) $+ %c | goto n }
n747=    if %a == 6 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 3,$mid( [ %p ] ,3,1), [ %c ] $+ $chr(160)) $+ %c | goto n }
n748=    if %a == 9 { var %b %b $+ 00% | goto n }
n749=    var %b %b $+ $chr(160)
n750=    :n
n751=    inc %a
n752=  }
n753=  return %b $+ 
n754=}
n755=
n756=;Para KI
n757=alias KIPercent {
n758=  var %a 0
n759=  var %b 12,12
n760=  var %c 7
n761=  if $2 { var %p $int($calc(100* $1 / $2)) }
n762=  while %a < 10 {
n763=    if %a >= $int($calc(%p /10)) { var %b %b $+ 15,15 | var %c 15 }
n764=    if %a == 4 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 1,0,$left( [ %p ] ,1)) $+ %c | goto n }
n765=    if %a == 5 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 1,$left( [ %p ] ,1),$mid( [ %p ] ,2,1)) $+ %c | goto n }
n766=    if %a == 6 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 3,$mid( [ %p ] ,3,1), [ %c ] $+ $chr(160)) $+ %c | goto n }
n767=    if %a == 9 { var %b %b $+ 00% | goto n }
n768=    var %b %b $+ $chr(160)
n769=    :n
n770=    inc %a
n771=  }
n772=  return %b $+ 
n773=}
n774=
n775=;Para Cp
n776=alias CPercent {
n777=  var %a 0
n778=  var %b 07,07
n779=  var %c 7
n780=  if $2 { var %p $int($calc(100* $1 / $2)) }
n781=  while %a < 10 {
n782=    if %a >= $int($calc(%p /10)) { var %b %b $+ 15,15 | var %c 15 }
n783=    if %a == 4 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 1,0,$left( [ %p ] ,1)) $+ %c | goto n }
n784=    if %a == 5 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 1,$left( [ %p ] ,1),$mid( [ %p ] ,2,1)) $+ %c | goto n }
n785=    if %a == 6 { var %b %b $+ 00 $+ $iif($len( [ %p ] ) == 3,$mid( [ %p ] ,3,1), [ %c ] $+ $chr(160)) $+ %c | goto n }
n786=    if %a == 9 { var %b %b $+ 00% | goto n }
n787=    var %b %b $+ $chr(160)
n788=    :n
n789=    inc %a
n790=  }
n791=  return %b $+ 
n792=}
n793=
n794=
n795=;Para EXP
n796=alias EXPercent {
n797=  var %a 0
n798=  var %b 14,14
n799=  var %c 14
n800=
n801=  if ($2 == 1) { var %p $int($calc(100* $1 / 31)) }
n802=  if ($2 == 2) { var %p $int($calc(100* $1 / 68)) }
n803=  if ($2 == 3) { var %p $int($calc(100* $1 / 363)) }
n804=  if ($2 == 4) { var %p $int($calc(100* $1 / 1168)) }
n805=  if ($2 == 5) { var %p $int($calc(100* $1 / 2884)) }
n806=  if ($2 == 6) { var %p $int($calc(100* $1 / 6038)) }
n807=  if ($2 == 7) { var %p $int($calc(100* $1 / 11287)) }
n808=  if ($2 == 8) { var %p $int($calc(100* $1 / 19423)) }
n809=  if ($2 == 9) { var %p $int($calc(100* $1 / 31378)) }
n810=  if ($2 == 10) { var %p $int($calc(100* $1 / 48229)) }
n811=  if ($2 == 11) { var %p $int($calc(100* $1 / 71201)) }
n812=  if ($2 == 12) { var %p $int($calc(100* $1 / 101676)) }
n813=  if ($2 == 13) { var %p $int($calc(100* $1 / 141192)) }
n814=  if ($2 == 14) { var %p $int($calc(100* $1 / 191452)) }
n815=  if ($2 == 15) { var %p $int($calc(100* $1 / 254327)) }
n816=  if ($2 == 16) { var %p $int($calc(100* $1 / 331864)) }
n817=  if ($2 == 17) { var %p $int($calc(100* $1 / 426284)) }
n818=  if ($2 == 18) { var %p $int($calc(100* $1 / 539995)) }
n819=  if ($2 == 19) { var %p $int($calc(100* $1 / 675590)) }
n820=  if ($2 == 20) { var %p $int($calc(100* $1 / 835854)) }
n821=  if ($2 == 21) { var %p $int($calc(100* $1 / 1023775)) }
n822=  if ($2 == 22) { var %p $int($calc(100* $1 / 1242536)) }
n823=  if ($2 == 23) { var %p $int($calc(100* $1 / 1495531)) }
n824=  if ($2 == 24) { var %p $int($calc(100* $1 / 1786365)) }
n825=  if ($2 == 25) { var %p $int($calc(100* $1 / 2118860)) }
n826=  if ($2 == 26) { var %p $int($calc(100* $1 / 2497059)) }
n827=  if ($2 == 27) { var %p $int($calc(100* $1 / 2925229)) }
n828=  if ($2 == 28) { var %p $int($calc(100* $1 / 3407873)) }
n829=  if ($2 == 29) { var %p $int($calc(100* $1 / 3949727)) }
n830=  if ($2 == 30) { var %p $int($calc(100* $1 / 4555766)) }
n831=  if ($2 == 31) { var %p $int($calc(100* $1 / 5231213)) }
n832=  if ($2 == 32) { var %p $int($calc(100* $1 / 5981539)) }
n833=  if ($2 == 33) { var %p $int($calc(100* $1 / 6812472)) }
n834=  if ($2 == 34) { var %p $int($calc(100* $1 / 7729999)) }
n835=  if ($2 == 35) { var %p $int($calc(100* $1 / 8740372)) }
n836=  if ($2 == 36) { var %p $int($calc(100* $1 / 9850111)) }
n837=  if ($2 == 37) { var %p $int($calc(100* $1 / 11066012)) }
n838=  if ($2 == 38) { var %p $int($calc(100* $1 / 12395149)) }
n839=  if ($2 == 39) { var %p $int($calc(100* $1 / 13844879)) }
n840=  if ($2 == 40) { var %p $int($calc(100* $1 / 15422851)) }
n841=  if ($2 == 41) { var %p $int($calc(100* $1 / 17137002)) }
n842=  if ($2 == 42) { var %p $int($calc(100* $1 / 18995573)) }
n843=  if ($2 == 43) { var %p $int($calc(100* $1 / 21007103)) }
n844=  if ($2 == 44) { var %p $int($calc(100* $1 / 23180442)) }
n845=  if ($2 == 45) { var %p $int($calc(100* $1 / 25524751)) }
n846=  if ($2 == 46) { var %p $int($calc(100* $1 / 28049509)) }
n847=  if ($2 == 47) { var %p $int($calc(100* $1 / 30764519)) }
n848=  if ($2 == 48) { var %p $int($calc(100* $1 / 33679907)) }
n849=  if ($2 == 49) { var %p $int($calc(100* $1 / 36806133)) }
n850=  if ($2 == 50) { var %p $int($calc(100* $1 / 40153995)) }
n851=  if ($2 == 51) { var %p $int($calc(100* $1 / 45524865)) }
n852=  if ($2 == 52) { var %p $int($calc(100* $1 / 51262204)) }
n853=  if ($2 == 53) { var %p $int($calc(100* $1 / 57383682)) }
n854=  if ($2 == 54) { var %p $int($calc(100* $1 / 63907585)) }
n855=  if ($2 == 55) { var %p $int($calc(100* $1 / 70852742)) }
n856=  if ($2 == 56) { var %p $int($calc(100* $1 / 80700339)) }
n857=  if ($2 == 57) { var %p $int($calc(100* $1 / 91162131)) }
n858=  if ($2 == 58) { var %p $int($calc(100* $1 / 102265326)) }
n859=  if ($2 == 59) { var %p $int($calc(100* $1 / 114038008)) }
n860=  if ($2 == 60) { var %p $int($calc(100* $1 / 126509030)) }
n861=  if ($2 == 61) { var %p $int($calc(100* $1 / 146307211)) }
n862=  if ($2 == 62) { var %p $int($calc(100* $1 / 167243291)) }
n863=  if ($2 == 63) { var %p $int($calc(100* $1 / 189363788)) }
n864=  if ($2 == 64) { var %p $int($calc(100* $1 / 212716741)) }
n865=  if ($2 == 65) { var %p $int($calc(100* $1 / 237351413)) }
n866=  if ($2 == 66) { var %p $int($calc(100* $1 / 271973532)) }
n867=  if ($2 == 67) { var %p $int($calc(100* $1 / 308441375)) }
n868=  if ($2 == 68) { var %p $int($calc(100* $1 / 346825235)) }
n869=  if ($2 == 69) { var %p $int($calc(100* $1 / 387197529)) }
n870=  if ($2 == 70) { var %p $int($calc(100* $1 / 429632402)) }
n871=  if ($2 == 71) { var %p $int($calc(100* $1 / 474205751)) }
n872=  if ($2 == 72) { var %p $int($calc(100* $1 / 532692055)) }
n873=  if ($2 == 73) { var %p $int($calc(100* $1 / 606319094)) }
n874=  if ($2 == 74) { var %p $int($calc(100* $1 / 696376867)) }
n875=  if ($2 == 75) { var %p $int($calc(100* $1 / 804219972)) }
n876=  if ($2 == 76) { var %p $int($calc(100* $1 / 931275828)) }
n877=  if ($2 == 77) { var %p $int($calc(100* $1 / 1151275834)) }
n878=  if ($2 == 78) { var %p $int($calc(100* $1 / 1511275834)) }
n879=  if ($2 == 79) { var %p $int($calc(100* $1 / 2099275834)) }
n880=  if ($2 == 80) { var %p $int($calc(100* $1 / 4200000000)) }
n881=  if ($2 == 81) { var %p $int($calc(100* $1 / 6300000000)) }
n882=  if ($2 == 82) { var %p $int($calc(100* $1 / 8820000000)) }
n883=  if ($2 == 83) { var %p $int($calc(100* $1 / 11844000000)) }
n884=  if ($2 == 84) { var %p $int($calc(100* $1 / 15472800000)) }
n885=  if ($2 == 85) { var %p $int($calc(100* $1 / 19827360000)) }
n886=  if ($2 == 86) { var %p $int($calc(100* $1 / 25314000000)) }
n887=
n888=  ;if ($2 == ) { var %p $int($calc(100* $1 / )) }
n889=
n890=  while %a < 10 {
n891=    if %a >= $int($calc(%p /10)) { var %b %b $+ 15,00 | var %c 15 }
n892=    if %a == 4 { var %b %b $+ 15 $+ $iif($len( [ %p ] ) == 1,0,$left( [ %p ] ,1)) $+ %c | goto n }
n893=    if %a == 5 { var %b %b $+ 15 $+ $iif($len( [ %p ] ) == 1,$left( [ %p ] ,1),$mid( [ %p ] ,2,1)) $+ %c | goto n }
n894=    if %a == 6 { var %b %b $+ 15 $+ $iif($len( [ %p ] ) == 3,$mid( [ %p ] ,3,1), [ %c ] $+ $chr(160)) $+ %c | goto n }
n895=    if %a == 9 { var %b %b $+ 15% | goto n }
n896=    var %b %b $+ $chr(160)
n897=    :n
n898=    inc %a
n899=  }
n900=  return %b $+ 
n901=}
n902=alias habslvltompconsume { 
n903=  if ($1 = 1) { return 25 }
n904=  if ($1 = 2) { return 35 }
n905=  if ($1 = 3) { return 55 }
n906=  if ($1 = 4) { return 75 }
n907=  if ($1 = 5) { return 95 }
n908=  if ($1 = 6) { return 155 }
n909=  if ($1 = 7) { return 245 }
n910=  if ($1 = 8) { return 355 }
n911=  if ($1 = 9) { return 505 }
n912=  if ($1 = 10) { return 845 }
n913=}
n914=;restore_stats <pers> <quantidade>
n915=alias restore_stats { 
n916=  if ($prop = hp) {
n917=    if ($calc($db($1,Battle,Hp).read + $2) > $db($1,Battle,HpMax).read) { $db($1,Battle,Hp,$db($1,Battle,HpMax).read).write }
n918=    else { $db($1,Battle,Hp,$calc($db($1,Battle,Hp).read + $2)).write }
n919=  }
n920=  if ($prop = ki) {
n921=    if ($calc($db($1,Battle,Ki).read + $2) > $db($1,Battle,KiMax).read) { $db($1,Battle,Ki,$db($1,Battle,KiMax).read).write }
n922=    else { $db($1,Battle,Ki,$calc($db($1,Battle,Ki).read + $2)).write }
n923=  }
n924=  if ($prop = cp) {
n925=    if ($calc($db($1,Battle,Cp).read + $2) > $db($1,Battle,CpMax).read) { $db($1,Battle,Cp,$db($1,Battle,CpMax).read).write }
n926=    else { $db($1,Battle,Cp,$calc($db($1,Battle,Cp).read + $2)).write }
n927=  }
n928=  if ($prop = full) {
n929=    $db($1,Battle,Hp,$db($1,Battle,HpMax).read).write
n930=    $db($1,Battle,Ki,$db($1,Battle,KiMax).read).write
n931=    $db($1,Battle,Cp,$db($1,Battle,CpMax).read).write
n932=  }
n933=}
n934=;recheck_stats <pers>
n935=alias recheck_stats {
n936=  if ($db($1,Battle,Hp).read > $db($1,Battle,HpMax).read) { $db($1,Battle,Hp,$db($1,Battle,HpMax).read).write }
n937=  if ($db($1,Battle,Ki).read > $db($1,Battle,KiMax).read) { $db($1,Battle,Ki,$db($1,Battle,KiMax).read).write }
n938=  if ($db($1,Battle,Cp).read > $db($1,Battle,CpMax).read) { $db($1,Battle,Cp,$db($1,Battle,CpMax).read).write }
n939=
n940=}
